function CitySelect(t){this.config={data:"",provId:"",cityId:"",areaId:"",isSelect:!0,provCallBack:null,cityCallBack:null,areaCallBack:null},this.config=$.extend(this.config,t||{}),this.init()}CitySelect.prototype={constructor:CitySelect,init:function(){var t=this,a=t.config;if(!/^#/.test(a.provId))return void alert("省份ID传的不正确,格式是 #XXX");if(!/^#/.test(a.cityId))return void alert("城市ID传的不正确,格式是 #XXX");if(!/^#/.test(a.cityId))return void alert("区ID传的不正确,格式是 #XXX");this.provCode=$(a.provId).attr("data-code"),this.cityCode=$(a.cityId).attr("data-code"),this.areaCode=$(a.areaId).attr("data-code"),this.provid=a.provId.replace(/^#/g,""),this.cityid=a.cityId.replace(/^#/g,""),this.areaid=a.areaId.replace(/^#/g,""),t._provFunc(),t._cityFunc(),t._areaFunc();var e=$(a.provId).val();-1==e&&($(a.provId).attr("data-code","-1"),$(a.cityId).attr("data-code","-1"),$(a.areaId).attr("data-code","-1")),$(a.provId).change(function(){t._cityFunc(),t._areaFunc()}),$(a.cityId).change(function(){t._areaFunc()}),$(a.areaId).change(function(){$(a.areaId).attr("data-code",$(this).val())})},_provFunc:function(){var t=this,a=t.config,e="";e+='<option value="-1" data-name="请选择" selected>请选择</option>',$(a.data).each(function(t,a){e+="<option data-name='"+a[1]+"' value='"+a[0]+"'>"+a[1]+"</option>"}),$(a.provId).html(e),a.isSelect&&($($(a.provId+" option")[1]).attr("selected","true"),this.provCode&&t._setSelectCode(a.provId,this.provCode)),a.provCallBack&&$.isFunction(a.provCallBack)&&a.provCallBack()},_cityFunc:function(){var t,a,e,o=this,d=o.config,i=$(d.provId).get(0).selectedIndex,c="";e=$($(d.provId+" option")[0]).attr("value");var r='<option value="-1" data-name="请选择" selected>请选择</option>';if(-1==e&&i--,$(d.cityId).empty(),$(d.areaId).empty(),0>i)return $(d.provId).attr("data-code","-1"),$(d.cityId).attr("data-code","-1"),$(d.areaId).attr("data-code","-1"),$(d.cityId).html(r),void $(d.areaId).html(r);t=d.data[i],a=t[2],c+='<option value="-1" data-name="请选择">请选择</option>';for(var n=0;n<a.length;n++){var l=a[n];c+="<option value='"+l[0]+"' data-name='"+l[1]+"'>"+l[1]+"</option>"}$(d.cityId).html(c),d.isSelect&&($($(d.cityId+" option")[1]).attr("selected","true"),this.cityCode&&o._setSelectCode(d.cityId,this.cityCode)),o._selectChangeCode(),d.cityCallBack&&$.isFunction(d.cityCallBack)&&d.cityCallBack()},_areaFunc:function(){var t,a,e,o,d=this,i=d.config,c=$($(i.provId+" option")[0]).attr("value"),r=$($(i.cityId+" option")[0]).attr("value"),n=$(i.provId).get(0).selectedIndex,l=$(i.cityId).get(0).selectedIndex,v="",p='<option value="-1" data-name="请选择" selected>请选择</option>';if(-1==c?(n--,l--):-1!=c&&-1==r&&l--,0>n||0>l)return $(i.cityId).attr("data-code","-1"),$(i.areaId).attr("data-code","-1"),void $(i.areaId).html(p);if(t=i.data[n],a=t[2],o=a[l],e=o[2],v+='<option value="-1" data-name="请选择">请选择</option>',null!=e)for(var I=0;I<e.length;I++){var s=e[I];v+="<option value='"+s[0]+"' data-name='"+s[1]+"'>"+s[1]+"</option>"}$(i.areaId).html(v),i.isSelect&&($($(i.areaId+" option")[1]).attr("selected","true"),this.areaCode&&d._setSelectCode(i.areaId,this.areaCode)),d._selectChangeCode(),i.areaCallBack&&$.isFunction(i.areaCallBack)&&i.areaCallBack()},_changeSetCode:function(t){var a,e,o=this,d=o.config,i=t.selectedIndex,c=$(d.provId).val(),r="<option data-name='请选择' value='-1' selected>请选择</option>",n=$($(d.provId+" option")[0]).attr("value");i>-1&&(-1==c?("-1"!=n&&($(d.provId).prepend(r),$(d.cityId).prepend(r),$(d.areaId).prepend(r)),$(d.provId).attr("data-code",""),$(d.cityId).attr("data-code",""),$(d.areaId).attr("data-code","")):(a=t.options[i],e=$(a).val(),$(t).attr("data-code",e)))},_selectChangeCode:function(){var t=this,a=(t.config,document.getElementById(this.provid));t._changeSetCode(a);var e=document.getElementById(this.cityid);t._changeSetCode(e);var o=document.getElementById(this.areaid);t._changeSetCode(o)},_setSelectCode:function(t,a){var e=this,o=(e.config,$(t+" option"));$(o).each(function(e,o){var d=$(o).val();return d==a?($(o).attr("selected","true"),void $(t).attr("data-code",d)):void 0})}};